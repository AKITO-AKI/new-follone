<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>follone 設定</title>
  <link rel="stylesheet" href="options.css"/>
</head>
<body>
  <div class="wrap">
    <header class="hero">
      <div class="brand">
        <div class="dot"></div>
        <div>
          <div class="name">follone</div>
          <div class="sub">設定 / 診断</div>
        </div>
      </div>
      <div class="meta" id="ver">--</div>
    </header>

    <section class="card">
      <h2>基本</h2>
      <div class="row">
        <div class="label">有効化</div>
        <label class="switch">
          <input type="checkbox" id="enabled"/>
          <span class="slider"></span>
        </label>
      </div>

      <div class="row">
        <div class="label">AIモード</div>
        <select id="aiMode">
          <option value="auto">Auto（Prompt API優先）</option>
          <option value="mock">Mock（簡易判定）</option>
          <option value="off">OFF</option>
        </select>
      </div>

      <div class="row">
        <div class="label">スポットライト介入</div>
        <label class="switch">
          <input type="checkbox" id="enableSpotlight"/>
          <span class="slider"></span>
        </label>
      </div>
    </section>

    <section class="card">
      <h2>判定しきい値</h2>
      <div class="row">
        <div class="label">介入最小リスク</div>
        <input type="number" id="minRiskToIntervene" step="0.01" min="0" max="1"/>
      </div>
      <div class="row">
        <div class="label">検索促し最小リスク</div>
        <input type="number" id="minRiskToPromptSearch" step="0.01" min="0" max="1"/>
      </div>
    </section>

    <section class="card">
      <h2>パフォーマンス</h2>
      <div class="row">
        <div class="label">バッチサイズ</div>
        <input type="number" id="batchSize" min="1" max="10" step="1"/>
      </div>
      <div class="row">
        <div class="label">アイドル復帰(ms)</div>
        <input type="number" id="idleMs" min="2000" max="600000" step="1000"/>
      </div>
      <div class="row">
        <div class="label">テキスト上限(文字)</div>
        <input type="number" id="maxTextChars" min="40" max="400" step="10"/>
      </div>
    </section>

    <section class="card">
      <h2>ログ</h2>
      <div class="row">
        <div class="label">デバッグ</div>
        <label class="switch">
          <input type="checkbox" id="debug"/>
          <span class="slider"></span>
        </label>
      </div>
      <div class="row">
        <div class="label">ログレベル</div>
        <select id="logLevel">
          <option value="debug">debug</option>
          <option value="info">info</option>
          <option value="warn">warn</option>
          <option value="error">error</option>
        </select>
      </div>
    </section>

    <section class="card">
      <h2>診断</h2>
      <div class="diag">
        <div class="k">Prompt API availability</div>
        <div class="v" id="avail">--</div>
        <div class="k">Backend status</div>
        <div class="v" id="status">--</div>
        <div class="k">hasSession</div>
        <div class="v" id="hasSession">--</div>
        <div class="k">lastError</div>
        <div class="v mono" id="lastError">--</div>
      </div>
      <div class="actions">
        <button id="refresh" class="btn">更新</button>
        <button id="warmup" class="btn solid">AI起動</button>
      </div>
      <p class="note">
        「AI起動」でPrompt APIのセッション生成（必要ならダウンロード開始）を試行します。
      </p>
    </section>

    <footer class="foot">
      <span>follone</span>
      <span class="muted">X / Twitter content safety assistant</span>
    </footer>
  </div>

  <script src="options.js"></script>
</body>
</html>
