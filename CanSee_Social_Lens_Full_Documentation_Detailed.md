# CanSee: Social Lens  
## 実装・構成・技術 **完全解説ドキュメント（詳細版）**

---

## このドキュメントについて（最重要）

本ドキュメントは **CanSee: Social Lens** の提出・評価・引き継ぎを目的として作成された、  
**「コードを読まなくても、作品の全体像・各要素の意味・役割・技術的意図が分かる」** ことを最優先にした説明書である。

- 初見の第三者（審査員・教員）  
- 将来の開発者  
- 数か月後の自分  

の全員が **「なぜこの機能が存在するのか」「どこを見れば何が分かるのか」** を理解できる粒度で記述する。

---

## 1. プロジェクト概要

### 1.1 名称

**CanSee: Social Lens**

### 1.2 コンセプト（作品の核）

CanSee は  
**SNSの情報摂取を「制限」するのではなく「可視化」することで、  
利用者自身が気づき、考え、行動を選び直せるようにする学習支援システム**である。

多くのSNS補助ツールが「遮断」「警告」に寄りがちであるのに対し、  
CanSee は **“見えるようにする” ＝ Social Lens** という思想を採用している。

---

## 2. 全体アーキテクチャ（何がどこで動いているか）

### 2.1 全体構成図

```
┌────────────────────────────┐
│  X (Twitter) ページ         │
│  content.js                 │
│  ・投稿監視                 │
│  ・DOM解析                  │
│  ・トピック分類             │
└────────────▲──────────────┘
             │ storage / message
┌────────────┴──────────────┐
│ Background / ServiceWorker │
│ sw.js                      │
│ ・Prompt API通信           │
│ ・危険判定                 │
│ ・セッション管理           │
└────────────▲──────────────┘
             │ storage / event
┌────────────┴──────────────┐
│ Overlay                     │
│ overlay.html / js           │
│ ・キャラ介入表示           │
│ ・Spotlight                │
│ ・現在状態の即時反映       │
└────────────▲──────────────┘
             │ storage / event
┌────────────┴──────────────┐
│ Options（Home Base）        │
│ options.html / js           │
│ ・全体管理                 │
│ ・設定                     │
│ ・成長 / 分析               │
│ ・デバッグ                 │
└────────────────────────────┘
```

### 2.2 Options = Home Base の意味

Options ページは単なる設定画面ではなく、  
**「拠点」「司令室」「成長状況が一目で分かる場所」**として設計されている。

Overlay が「現場」であり、  
Options は「帰ってきて状況を整理する場所」である。

---

## 3. Options（Home Base）画面の構造解説

### 3.1 画面の主役

Options で最も重要なのは次の3要素である。

1. **キャラクター（作品の顔）**  
2. **現在の状態（Lv / EXP / 安全度 / 偏り）**  
3. **次に取るべき行動（クエスト・設定・学習）**

この3つが常に視線の中心に来るよう設計されている。

---

## 4. キャラクターシステム（PetEngine）

### 4.1 なぜキャラクターがいるのか

CanSee は情報ツールでありながら、  
**「無機質にならないこと」**を強く意識している。

キャラクターは

- 状態を感情として伝える
- 警告を“叱責”ではなく“寄り添い”に変換する
- 成長を「数値」ではなく「体験」に変える

ための UI インターフェースである。

### 4.2 キャラクター一覧

| キャラ名 | 性格 | 見た目 |
|--------|------|-------|
| follone | 落ち着いた・慎重 | ダウナー猫 |
| likoris | 活発・前向き | 元気なリス |

### 4.3 技術仕様（PetEngine）

- Canvas描画（32x32）
- 最大16色パレット（視認性と軽量化）
- レイヤー順厳守：
  `base → eyes → mouth → extra → head → fx`
- anchor によりアクセ・エフェクトを固定

Options / Overlay 両方で同一仕様を使用。

---

## 5. ONE GLANCE（一目確認エリア）

### 5.1 目的

**学校現場で「今このPCは正しく動いているか」を1秒で確認できる**こと。

### 5.2 表示内容

- 拡張：ON / OFF
- API：Available / Unavailable
- 解析：Running / Paused
- Spotlight：ON / OFF

朝の授業前チェックや、トラブル時の確認を想定。

---

## 6. Bias（偏り）ダッシュボード

### 6.1 偏りとは何か

偏りとは  
**「どの種類の情報をどれだけ見ているか」**を示す指標である。

### 6.2 指標

- Focus：同一ジャンル集中度
- Variety：多様性
- Explore：新規性

### 6.3 表示要素

- 円グラフ
- 数値
- TL TYPE（言語化ラベル）

### 6.4 TL TYPE の意味

| タイプ | 説明 |
|------|-----|
| 情報偏重型 | 同ジャンル閲覧が多い |
| 娯楽集中型 | 娯楽系に偏っている |
| 探索不足型 | 新規ジャンルが少ない |
| 探索バランス型 | 理想的状態 |

**期間切替（日/週/月/年/総合）により、すべてリアルタイム更新される。**

---

## 7. Quest / RPG（成長システム）

### 7.1 なぜRPGなのか

「安全なSNS利用」を  
**“我慢”ではなく“成長体験”として提示するため**。

### 7.2 Quest

- Daily：3つ
- Weekly：1つ

例：
- 異なるジャンルの記事を見る
- 検索ワードを変える

### 7.3 EXP / Lv

- 行動に応じてEXP獲得
- Lvアップでアクセ解放

### 7.4 報酬

- キャラアクセサリ
- 表情・演出解放

---

## 8. 設定（User Mode）

### 8.1 一般ユーザーが触れる設定

- 拡張ON/OFF
- 解析・介入・表示トグル
- キャラ切替（Overlay反映）
- 危険感度（low / normal / hard）
- Prompt API 導入
- チュートリアル管理
- 偏り期間切替
- 完全初期化

すべて **「何をすると何が起きるか」** が tooltip で説明される。

---

## 9. Dev Mode（developer）

### 9.1 出現条件

コマンド入力欄に

```
developer
```

と入力することで解放される。

### 9.2 目的

- 学校導入テスト
- 状態再現
- 見た目調整

### 9.3 主な機能

- Prompt API 状態再現
- セッションリセット
- Overlay強制表示
- PetEngine 表情・anchor確認
- JSON検証
- Bias生データ表示

---

## 10. Tooltip（? チップ）

### 10.1 役割

**英語表記や専門用語でも、説明なしで迷わないようにするための補助UI**。

### 10.2 仕様

- 各機能横に「？」チップ
- ホバーで1〜2行説明
- クリック不要

---

## 11. 安全性・学校運用への配慮

- ローカル保存のみ
- 外部送信なし
- School Modeで設定制限
- Reset一発復旧

---

## 12. 総括

CanSee: Social Lens は

- 技術（分析・API・Canvas）
- UI/UX（Home Base / キャラ）
- 教育的価値（可視化・説明性）

を統合した **学習支援型SNS補助システム**である。

本ドキュメントは  
**提出・評価・引き継ぎに耐える最終説明資料**として設計されている。
